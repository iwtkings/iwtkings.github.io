(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{598:function(v,_,e){"use strict";e.r(_);var t=e(5),p=Object(t.a)({},(function(){var v=this,_=v.$createElement,e=v._self._c||_;return e("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[e("p",[e("a",{attrs:{href:"https://juejin.cn/user/3298190613284270",target:"_blank",rel:"noopener noreferrer"}},[e("img",{attrs:{src:"https://p9-passport.byteacctimg.com/img/user-avatar/26bb2d6ac867b1a7749c0deae9bf0de5~300x300.image",alt:"img"}}),e("OutboundLink")],1)]),v._v(" "),e("p",[e("code",[v._v("uni-app")]),v._v("对"),e("code",[v._v("vue3 & Vite")]),v._v("的升级，是一个渐进式过程：")]),v._v(" "),e("ul",[e("li",[v._v("2020年9月：小程序平台支持 vue3 开发，小程序平台编译器依然使用webpack；")]),v._v(" "),e("li",[v._v("2021年5月：H5平台支持 vue3 开发，H5平台编译器升级为 Vite；")]),v._v(" "),e("li",[v._v("2021年8月：App平台支持 vue3 开发，App平台编译器升级为 Vite；")]),v._v(" "),e("li",[v._v("2021年11月：小程序平台编译器升级为 Vite；")])]),v._v(" "),e("p",[v._v("至此，"),e("code",[v._v("uni-app")]),v._v("在全平台支持了 "),e("code",[v._v("Vite")]),v._v(" 编译及"),e("code",[v._v("Vue 3.x")]),v._v(" 运行。")]),v._v(" "),e("p",[v._v("so，这场持续一年之久的大版本升级，究竟给"),e("code",[v._v("uni-app")]),v._v("项目带来了哪些提升？")]),v._v(" "),e("p",[v._v("是时候总结（秀）一波了。")]),v._v(" "),e("p",[v._v("新版 uni-app 框架主要做了三大改进：")]),v._v(" "),e("ul",[e("li",[v._v("重写框架内核：基于"),e("code",[v._v("vue3 + ts")]),v._v("重写内置组件和API，实现更彻底、更高效的"),e("code",[v._v("tree-shaking")]),v._v("；")]),v._v(" "),e("li",[v._v("新增支持 Vite 构建工具，在H5平台实现秒开预览；")]),v._v(" "),e("li",[v._v("新增支持 Vue3.x，实现更灵活的开发方式，及更高的运行性能；")])]),v._v(" "),e("p",[v._v("基于这三大改进，uni-app项目获得了"),e("strong",[v._v("多快好省")]),v._v("四大收益：")]),v._v(" "),e("ul",[e("li",[v._v("更多的语法支持，支持组合式API，业务聚焦，开发效率更高；")]),v._v(" "),e("li",[v._v("更快的编译速度，H5平台十倍加速，小程序、App加速30%以上；")]),v._v(" "),e("li",[v._v("更好的运行性能，用户端响应更快，体验更好；")]),v._v(" "),e("li",[v._v("更小的代码体积，瘦身30%以上，更省体积、更省流量")])]),v._v(" "),e("h2",{attrs:{id:"更多的语法支持"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更多的语法支持"}},[v._v("#")]),v._v(" 更多的语法支持")]),v._v(" "),e("p",[v._v("新版"),e("code",[v._v("uni-app")]),v._v("支持Vue 3.x框架，支持组合式API，可实现更聚焦的业务开发。")]),v._v(" "),e("p",[v._v("Vue 3.x的一些新增特性，"),e("code",[v._v("uni-app")]),v._v("也已经完全支持，如：")]),v._v(" "),e("ul",[e("li",[v._v("支持"),e("code",[v._v("<script setup>")])]),v._v(" "),e("li",[v._v("支持"),e("code",[v._v("<style scoped>")]),v._v("、"),e("code",[v._v("<style module>")]),v._v("、"),e("code",[v._v("State-Driven Dynamic CSS(v-bind)")])]),v._v(" "),e("li",[v._v("支持"),e("code",[v._v("jsx")]),v._v("、"),e("code",[v._v("tsx")]),v._v("（h5,app 平台支持，小程序不支持）")])]),v._v(" "),e("p",[v._v("另外，在小程序平台，新版"),e("code",[v._v("uni-app")]),v._v("也扩展了更多的语法，如：")]),v._v(" "),e("ul",[e("li",[v._v("更完善的模板语法支持（如 "),e("code",[v._v("class")]),v._v("、"),e("code",[v._v("style")]),v._v(" 支持函数、变量等，不再局限数组、对象类型）")]),v._v(" "),e("li",[v._v("更完整的 "),e("code",[v._v("props")]),v._v(" 支持（如传递函数）")]),v._v(" "),e("li",[v._v("更完善的 "),e("code",[v._v("slot")]),v._v(" 支持（如作用域插槽）")])]),v._v(" "),e("h2",{attrs:{id:"更快的编译速度"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更快的编译速度"}},[v._v("#")]),v._v(" 更快的编译速度")]),v._v(" "),e("p",[v._v("开发者日常工作中，最无聊的就是等待编译构建。")]),v._v(" "),e("p",[v._v("某乎上还有一个”程序员在等待编译的时候都做什么？“的讨论帖，可见编译时间对开发者而言，是一个多么尴尬无聊的碎片时间。")]),v._v(" "),e("p",[e("code",[v._v("uni-app")]),v._v("本次升级"),e("code",[v._v("vue3 & Vite")]),v._v("后，在编译时间上有多少改进？带给开发者多少福利？我们安排真实测试，以数据说话。")]),v._v(" "),e("p",[v._v("测试环境说明：")]),v._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[v._v("硬件：RedmiBook 14 二代\n处理器：Intel(R) Core(TM) i7-1065G7 CPU @ 1.30GHz \n内存：16.0 GB\n操作系统：Windows 11 专业版 64 位操作系统\n")])]),v._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[v._v("1")]),e("br"),e("span",{staticClass:"line-number"},[v._v("2")]),e("br"),e("span",{staticClass:"line-number"},[v._v("3")]),e("br"),e("span",{staticClass:"line-number"},[v._v("4")]),e("br")])]),e("p",[v._v("关于编译速度，我们做了两个维度的对比：")]),v._v(" "),e("ul",[e("li",[v._v("纵向对比：挑选"),e("code",[v._v("uni-app")]),v._v("常用项目模板，在H5、小程序、App平台，分别测试"),e("code",[v._v("vue 2.6")]),v._v("和"),e("code",[v._v("vue 3.x")]),v._v("的编译时间")]),v._v(" "),e("li",[v._v("横向对比：使用业内优秀的其它跨端框架，创建默认项目模板，记录其编译时间，和"),e("code",[v._v("uni-app")]),v._v("的"),e("code",[v._v("vue 3.x")]),v._v("版本进行对比")])]),v._v(" "),e("h3",{attrs:{id:"uni-app-历史版本纵向对比"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#uni-app-历史版本纵向对比"}},[v._v("#")]),v._v(" uni-app 历史版本纵向对比")]),v._v(" "),e("p",[v._v("我们选择"),e("code",[v._v("uni-app默认模板")]),v._v("、"),e("code",[v._v("uni-starter")]),v._v("、"),e("code",[v._v("hello-uniapp")]),v._v("三个项目模板，分别测试"),e("code",[v._v("vue 2.6")]),v._v("和"),e("code",[v._v("vue 3.x")]),v._v("的编译时间。")]),v._v(" "),e("p",[v._v("uni-app项目编译时间的采集方式：")]),v._v(" "),e("ul",[e("li",[e("code",[v._v("vue 2.6")]),v._v("版本编译时间 = webpack 的 stats.endTime - stats.startTime")]),v._v(" "),e("li",[e("code",[v._v("vue 3.x")]),v._v("版本编译时间 = 构建工具入口处记录 global.__vite_start_time = performance.now()，构建工具编译完成时：performance.now() - global.__vite_start_time")])]),v._v(" "),e("h4",{attrs:{id:"h5平台"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#h5平台"}},[v._v("#")]),v._v(" H5平台")]),v._v(" "),e("p",[v._v("对"),e("code",[v._v("uni-app")]),v._v("的三个项目模板分别运行到H5平台，进行多次编译测试，并求其均值后，获得如下数据：")]),v._v(" "),e("p",[e("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8e2353cca266411d825875799c4e3131~tplv-k3u1fbpfcp-watermark.awebp",alt:"img"}})]),v._v(" "),e("p",[v._v("由此，我们可以观察到：")]),v._v(" "),e("ul",[e("li",[v._v("在"),e("code",[v._v("vue 2.6")]),v._v("环境下，随着项目复杂度的提升，H5首页预览所需编译时间会直线增加；这是因为在"),e("code",[v._v("vue 2.6")]),v._v("版本下，虽然仅预览首页，但依然会使用 "),e("code",[v._v("webpack")]),v._v(" 编译整个项目资源；故项目越复杂，编译时间越长；")]),v._v(" "),e("li",[v._v("在"),e("code",[v._v("vue 3.x")]),v._v("环境下，H5首页预览的编译时间跟项目复杂度也有关系，但增幅不大；这是因为在"),e("code",[v._v("vue 3.x")]),v._v("版本下，使用 "),e("code",[v._v("Vite")]),v._v(" 进行构建，预览首页时仅编译首页及首页所依赖资源，不会编译其它页面资源。")])]),v._v(" "),e("p",[v._v("通过图表对比，我们可以直观得出结论："),e("code",[v._v("vue 3.x")]),v._v("环境下的首页编译时间，平均不到"),e("code",[v._v("vue 2.6")]),v._v("环境下的十分之一。")]),v._v(" "),e("p",[v._v("换言之，"),e("code",[v._v("vue 3.x")]),v._v("版本下的首页编译速度，相比"),e("code",[v._v("vue 2.6")]),v._v("版本，有"),e("strong",[v._v("十倍效率提升")]),v._v("。")]),v._v(" "),e("p",[v._v("这个十倍效率提升，主要得益于新版采用"),e("code",[v._v("Vite")]),v._v("作为构建工具，由此带来了两大好处：")]),v._v(" "),e("ul",[e("li",[v._v("使用原生 ESM 文件，无需打包，实现极速的服务启动；")]),v._v(" "),e("li",[v._v("预览（运行）使用"),e("code",[v._v("esbuild")]),v._v("作为打包工具，相比"),e("code",[v._v("vue 2.6")]),v._v("环境下的"),e("code",[v._v("webpack")]),v._v("，构建速度快 10-100 倍（这不是我们夸大，详见"),e("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fesbuild.docschina.org%2F",target:"_blank",rel:"noopener noreferrer"}},[v._v("esbuild"),e("OutboundLink")],1),v._v("）")])]),v._v(" "),e("p",[v._v("本着这个"),e("strong",[v._v("十倍效率提升")]),v._v("，小伙伴们还不赶紧上手试试？")]),v._v(" "),e("h4",{attrs:{id:"小程序平台"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#小程序平台"}},[v._v("#")]),v._v(" 小程序平台")]),v._v(" "),e("p",[v._v("对"),e("code",[v._v("uni-app")]),v._v("的三个模板项目运行到小程序平台，多次编译测试，并求其均值后，获得如下数据：")]),v._v(" "),e("p",[e("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6075ea69904d4fcdbe1977ed2ff4d1a7~tplv-k3u1fbpfcp-watermark.awebp",alt:"img"}})]),v._v(" "),e("p",[v._v("从上图对比数据来看，我们可以得出结论：小程序平台，"),e("code",[v._v("vue 3.x")]),v._v("版本下的运行编译，相比"),e("code",[v._v("vue 2.6")]),v._v("版本，编译性能至少提升30%；且项目越复杂，编译性能提升越明显，可以达到40% ~ 50%。")]),v._v(" "),e("h4",{attrs:{id:"app平台"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#app平台"}},[v._v("#")]),v._v(" App平台")]),v._v(" "),e("p",[v._v("对"),e("code",[v._v("uni-app")]),v._v("的三个项目模板继续运行到App平台，多次编译测试，并求其均值后，获得如下数据：")]),v._v(" "),e("p",[e("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/27f0ffcd92d24f08bd539273a913b9d9~tplv-k3u1fbpfcp-watermark.awebp",alt:"vue3-08"}})]),v._v(" "),e("p",[v._v("从上图对比数据来看，我们可以得出结论：App平台，"),e("code",[v._v("vue 3.x")]),v._v("版本下的运行编译，相比"),e("code",[v._v("vue 2.6")]),v._v("版本，编译性能提升将近50%。")]),v._v(" "),e("p",[v._v("虽没有H5平台的十倍效率提升那么刺激，但将近50%的速度提升，经常开发小程序/App的小伙伴，还不心动？")]),v._v(" "),e("h3",{attrs:{id:"业内优秀框架横向对比"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#业内优秀框架横向对比"}},[v._v("#")]),v._v(" 业内优秀框架横向对比")]),v._v(" "),e("p",[v._v("除了采用不同版本的"),e("code",[v._v("uni-app")]),v._v("进行纵向对比外，我们还使用业内优秀的跨端框架"),e("code",[v._v("Taro")]),v._v("，创建空的项目模板，进行横向对比测试。")]),v._v(" "),e("p",[v._v("具体测试方案：")]),v._v(" "),e("ol",[e("li",[v._v("安装"),e("code",[v._v("Taro")]),v._v('的最新cli，本文测试时使用的版本为"@Tarojs/Taro": "3.3.16"')]),v._v(" "),e("li",[v._v("使用"),e("code",[v._v("Taro init")]),v._v("命令，分别选择"),e("code",[v._v("react")]),v._v("、"),e("code",[v._v("vue")]),v._v("、"),e("code",[v._v("vue3")]),v._v("框架，创建三个默认项目模板，三个项目名称分别为"),e("code",[v._v("taro3-react")]),v._v("、"),e("code",[v._v("taro3-vue")]),v._v("、"),e("code",[v._v("taro3-vue3")]),v._v("，如下图： "),e("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a796e778344f43798a2c80393c12918a~tplv-k3u1fbpfcp-watermark.awebp",alt:"img"}})]),v._v(" "),e("li",[v._v("使用"),e("code",[v._v("npm run dev:h5")]),v._v("，运行到H5平台进行预览，记录每次预览编译时间，重复执行，求其均值")])]),v._v(" "),e("p",[v._v("关于"),e("code",[v._v("Taro")]),v._v("编译时间的计算方案：")]),v._v(" "),e("ol",[e("li",[v._v("开发一个"),e("code",[v._v("Taro")]),v._v("扩展插件，插件规范参考"),e("a",{attrs:{href:"https://link.juejin.cn/?target=http%3A%2F%2FTaro-docs.jd.com%2FTaro%2Fdocs%2Fplugin%2F",target:"_blank",rel:"noopener noreferrer"}},[v._v("Taro官网 - 插件功能"),e("OutboundLink")],1)]),v._v(" "),e("li",[v._v("在"),e("code",[v._v("ctx.onBuildStart")]),v._v("中记录开始编译时间")]),v._v(" "),e("li",[v._v("在"),e("code",[v._v("ctx.onBuildFinish")]),v._v("中记录编译结束时间")]),v._v(" "),e("li",[v._v("两者的时间差，即为编译过程消耗时间")])]),v._v(" "),e("p",[v._v("然后使用"),e("code",[v._v("uni-app")]),v._v("的"),e("code",[v._v("cli")]),v._v("命令行，创建基于"),e("code",[v._v("vue3.x")]),v._v("的空项目模板，项目命名为"),e("code",[v._v("uni-app-vue3")]),v._v("。")]),v._v(" "),e("p",[v._v("我们使用各自框架的命令行，将如上创建的5个项目分别编译到H5平台和小程序平台，多次测试，并求其均值。")]),v._v(" "),e("p",[v._v("同框架版本在H5平台上的编译时间，结果如下：")]),v._v(" "),e("p",[e("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6ec0d69f1f4047adaf6daa6969e28383~tplv-k3u1fbpfcp-watermark.awebp?",alt:"vue3-18.png"}})]),v._v(" "),e("p",[v._v("从图中可以看出，"),e("code",[v._v("uni-app")]),v._v("的"),e("code",[v._v("vue3")]),v._v("版本，在H5平台上的首页编译预览性能是遥遥领先的。")]),v._v(" "),e("p",[v._v("继续编译到小程序平台，多次测试，求其均值，结果如下：")]),v._v(" "),e("p",[e("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dceaa0a94a51448cbf594d1139d0fdc1~tplv-k3u1fbpfcp-watermark.awebp",alt:"img"}})]),v._v(" "),e("p",[v._v("从图中可以看出，"),e("code",[v._v("uni-app")]),v._v("的"),e("code",[v._v("vue3")]),v._v("版本，在小程序平台上的编译性能也是非常领先的。")]),v._v(" "),e("h2",{attrs:{id:"更好的运行速度"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更好的运行速度"}},[v._v("#")]),v._v(" 更好的运行速度")]),v._v(" "),e("p",[v._v("开发环节编译快了，那面向最终用户的软件，运行性能怎么样？")]),v._v(" "),e("p",[v._v("我们进入性能测试章节。")]),v._v(" "),e("p",[v._v("测试方案：")]),v._v(" "),e("ul",[e("li",[v._v("开发内容：开发一个仿微博小程序首页的复杂长列表，支持下拉刷新、上拉翻页、点赞。")]),v._v(" "),e("li",[v._v("界面如下：")])]),v._v(" "),e("p",[e("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4dd6fb97b0c44992949eac222c422ed6~tplv-k3u1fbpfcp-watermark.awebp",alt:"img"}})]),v._v(" "),e("ul",[e("li",[v._v("测试机型：小米 Mi 10 pro、MIUI 12.5 (21.11.3 开发版) 、微信版本 8.0.16")]),v._v(" "),e("li",[v._v("准备工作：每次开始测试前，杀掉各App进程、清空内存，保证测试机环境基本一致；每次从本地读取静态数据，屏蔽网络差异。")]),v._v(" "),e("li",[v._v("评测点：长列表中的某个组件，比如点赞组件，点击时是否能及时的修改未赞和已赞状态？")])]),v._v(" "),e("p",[v._v("测试计时方式：")]),v._v(" "),e("ul",[e("li",[v._v("选中某微博，点击“点赞”按钮，实现点赞状态状态切换（已赞高亮、未赞灰色），")]),v._v(" "),e("li",[v._v("点赞按钮 onclick函数开头开始计时，setData回调函数开头结束计时；")])]),v._v(" "),e("p",[v._v("在小米手机上进行多次测试，求其平均值，结果如下：")]),v._v(" "),e("table",[e("thead",[e("tr",[e("th",[v._v("记录条数")]),v._v(" "),e("th",[v._v("200")]),v._v(" "),e("th",[v._v("400")]),v._v(" "),e("th",[v._v("600")]),v._v(" "),e("th",[v._v("800")]),v._v(" "),e("th",[v._v("1000")])])]),v._v(" "),e("tbody",[e("tr",[e("td",[v._v("vue2")]),v._v(" "),e("td",[v._v("30ms")]),v._v(" "),e("td",[v._v("43ms")]),v._v(" "),e("td",[v._v("56ms")]),v._v(" "),e("td",[v._v("72ms")]),v._v(" "),e("td",[v._v("90ms")])]),v._v(" "),e("tr",[e("td",[v._v("vue3")]),v._v(" "),e("td",[v._v("8ms")]),v._v(" "),e("td",[v._v("9ms")]),v._v(" "),e("td",[v._v("9ms")]),v._v(" "),e("td",[v._v("8ms")]),v._v(" "),e("td",[v._v("9ms")])])])]),v._v(" "),e("p",[v._v("从表格中可以看出：")]),v._v(" "),e("ul",[e("li",[v._v("随着页面记录的增加，"),e("code",[v._v("vue 2.6")]),v._v("版本的"),e("code",[v._v("uni-app")]),v._v("项目，点赞组件响应时间快速增加，响应越来越慢；")]),v._v(" "),e("li",[v._v("基于"),e("code",[v._v("vue 3.x")]),v._v("的"),e("code",[v._v("uni-app")]),v._v("项目，点赞组件的响应时间跟页面条数无关，一直保持极高的响应灵敏度，性能体验远高于"),e("code",[v._v("vue 2.6")]),v._v("版本。")])]),v._v(" "),e("p",[v._v("从这个常见的长列表组件响应实验来看，"),e("code",[v._v("vue 3.x")]),v._v("的性能体验要远高于"),e("code",[v._v("vue 2.6")]),v._v("版本。")]),v._v(" "),e("h2",{attrs:{id:"更小的代码体积"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更小的代码体积"}},[v._v("#")]),v._v(" 更小的代码体积")]),v._v(" "),e("p",[v._v("项目发行后的代码体积，是一个很重要的考量指标：")]),v._v(" "),e("ul",[e("li",[v._v("H5平台：更小的代码体积，可以帮助开发者节省服务端带宽及CDN流量，可实现更快的资源加载及页面渲染；")]),v._v(" "),e("li",[v._v("小程序平台：更小的代码体积，可加速小程序包的下载（甚至可能免了分包加载的繁琐），帮助用户更快进入小程序业务界面；")]),v._v(" "),e("li",[v._v("App平台：更小的代码体积，可实现更快的App启动，帮助用户更快进入App首页")])]),v._v(" "),e("p",[v._v("为了测试"),e("code",[v._v("vue 3.x")]),v._v("新版升级后，代码体积的变化，我们同样做了两个维度的测试：")]),v._v(" "),e("ul",[e("li",[v._v("纵向对比：选择"),e("code",[v._v("uni-app")]),v._v("常用项目模板，在H5、小程序、App平台，分别测试"),e("code",[v._v("vue 2.6")]),v._v("和"),e("code",[v._v("vue 3.x")]),v._v("的编译包大小")]),v._v(" "),e("li",[v._v("横向对比：使用业内优秀的其它跨端框架，创建默认项目模板，记录其编译后的包体积大小，和"),e("code",[v._v("uni-app")]),v._v("版本进行对比")])]),v._v(" "),e("p",[v._v("Tips：")]),v._v(" "),e("ul",[e("li",[v._v("开发阶段重在编译速度，对应"),e("code",[v._v("npm run dev")]),v._v("操作")]),v._v(" "),e("li",[v._v("发行阶段重在编译包大小，对应"),e("code",[v._v("npm run build")]),v._v("操作")])]),v._v(" "),e("h3",{attrs:{id:"uni-app-不同版本纵向对比"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#uni-app-不同版本纵向对比"}},[v._v("#")]),v._v(" uni-app 不同版本纵向对比")]),v._v(" "),e("p",[v._v("我们复用之前创建的"),e("code",[v._v("uni-app默认模板")]),v._v("、"),e("code",[v._v("uni-starter")]),v._v("、"),e("code",[v._v("hello-uniapp")]),v._v("三个项目模板，分别测试"),e("code",[v._v("vue 2.6")]),v._v("和"),e("code",[v._v("vue 3.x")]),v._v("的编译包体积。")]),v._v(" "),e("p",[e("code",[v._v("uni-app")]),v._v("项目编译包体积的采集方式：编译到对应平台后，记录编译后文件夹的大小。")]),v._v(" "),e("h4",{attrs:{id:"h5平台-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#h5平台-2"}},[v._v("#")]),v._v(" H5平台")]),v._v(" "),e("p",[v._v("H5平台编译后代码体积记录如下：")]),v._v(" "),e("p",[e("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b054f08c66224e8cb203f3f45d8d89a0~tplv-k3u1fbpfcp-watermark.awebp",alt:"img"}})]),v._v(" "),e("p",[v._v("从统计结果来看，"),e("code",[v._v("uni-app")]),v._v("的"),e("code",[v._v("vue3.x")]),v._v("版本，在H5平台上的编译包体积至少瘦身30%以上。")]),v._v(" "),e("p",[v._v("H5平台的瘦身优化，主要得益于"),e("code",[v._v("uni-app")]),v._v("框架的底层全面重构，实现了更彻底的摇树优化。")]),v._v(" "),e("h4",{attrs:{id:"小程序平台-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#小程序平台-2"}},[v._v("#")]),v._v(" 小程序平台")]),v._v(" "),e("p",[v._v("小程序平台编译后代码体积记录如下：")]),v._v(" "),e("p",[e("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d20ce20582c944aa9702854af727110c~tplv-k3u1fbpfcp-watermark.awebp",alt:"img"}})]),v._v(" "),e("p",[v._v("从统计结果来看，"),e("code",[v._v("uni-app")]),v._v("的"),e("code",[v._v("vue3.x")]),v._v("版本，在小程序平台上也有大幅瘦身。")]),v._v(" "),e("h4",{attrs:{id:"app平台-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#app平台-2"}},[v._v("#")]),v._v(" App平台")]),v._v(" "),e("p",[v._v("App平台编译后代码体积记录如下： "),e("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5c0460ee198844168bc35146c8f1c047~tplv-k3u1fbpfcp-watermark.awebp",alt:"img"}})]),v._v(" "),e("p",[v._v("从统计结果来看，"),e("code",[v._v("uni-app")]),v._v("的"),e("code",[v._v("vue3.x")]),v._v("版本，在App平台上根据项目不同，会有不同幅度的瘦身。")]),v._v(" "),e("p",[v._v("从理论上来讲，项目中的页面模板越复杂，App平台的瘦身效果越明显。")]),v._v(" "),e("h3",{attrs:{id:"业内优秀框架横向对比-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#业内优秀框架横向对比-2"}},[v._v("#")]),v._v(" 业内优秀框架横向对比")]),v._v(" "),e("p",[v._v("关于编译后的代码体积，我们也和业内优秀的跨端框架"),e("code",[v._v("Taro")]),v._v("进行了对比，复用前面章节创建的三个"),e("code",[v._v("Taro")]),v._v("项目，分别编译到H5平台和小程序平台，计算其编译后的源码文件夹大小。")]),v._v(" "),e("p",[e("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/012e95bd1e3343e6b3c6e741a28a7e45~tplv-k3u1fbpfcp-watermark.awebp",alt:"img"}})]),v._v(" "),e("p",[v._v("从图中可以看出，"),e("code",[v._v("uni-app")]),v._v("的vue3版本，在H5平台上编译包体积是最小的，只有友商的十分之一左右。")]),v._v(" "),e("p",[v._v("我们继续测试，不同版本框架发行到微信小程序平台，记录其编译包大小：")]),v._v(" "),e("p",[e("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c6aa5fdca3084951ba2fb2ea0389032d~tplv-k3u1fbpfcp-watermark.awebp",alt:"img"}})]),v._v(" "),e("p",[v._v("从图中可以看出，"),e("code",[v._v("uni-app")]),v._v("的vue3版本，在小程序平台上编译包体积也是最小的。")]),v._v(" "),e("p",[v._v("**Tips：**细心的开发者会发现，所有框架版本编译到小程序上的代码包体积都远小于其在H5平台上的包体积，这是因为小程序由平台厂商提供内置组件及接口实现，而H5平台则需跨端框架自己实现内置组件及接口，故H5平台的代码包普遍要大一些。")]),v._v(" "),e("h2",{attrs:{id:"总结"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[v._v("#")]),v._v(" 总结")]),v._v(" "),e("p",[v._v("综上，我们以数字说话，阐述了vue3版本"),e("code",[v._v("uni-app")]),v._v("开发的诸多好处，再回顾一遍：")]),v._v(" "),e("ul",[e("li",[v._v("更多的语法")]),v._v(" "),e("li",[v._v("更快的编译")]),v._v(" "),e("li",[v._v("更好的运行")]),v._v(" "),e("li",[v._v("更少的代码")])]),v._v(" "),e("p",[v._v("你还不赶紧升级新版"),e("code",[v._v("uni-app")]),v._v("来试试吗？")]),v._v(" "),e("p",[v._v("对文本测试过程及结果有疑问的同学，欢迎到github上提交"),e("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fdcloudio%2Funi-app",target:"_blank",rel:"noopener noreferrer"}},[v._v("issue"),e("OutboundLink")],1),v._v("，欢迎指正。")])])}),[],!1,null,null,null);_.default=p.exports}}]);